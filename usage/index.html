

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>🏃‍♀️ Usage &mdash; PDS Registry Client 1.0 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Contact Us" href="../support/contact.html" />
    <link rel="prev" title="📦 Installation" href="../installation/index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> PDS Registry Client
          

          
            
            <img src="../_static/PDS_Planets.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Installation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../installation/index.html">📦 Installation</a></li>
</ul>
<p class="caption"><span class="caption-text">Usage</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">🏃‍♀️ Usage</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pre-requisites">Pre-requisites</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#registry-indexes">Registry indexes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#usage-information">Usage Information</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#get-the-first-10-products-of-your-discipline-node">Get The First 10 Products of Your Discipline Node</a></li>
<li class="toctree-l3"><a class="reference internal" href="#simple-filter-get-the-first-10-bundles-of-your-node">Simple Filter, Get The First 10 Bundles of Your Node</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-a-single-product">Get A Single Product</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-all-the-properties-available">Get All the Properties Available</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-all-the-distinct-values-for-one-property">Get All the Distinct Values for One Property</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-results-beyond-limit-of-10-products">Get Results Beyond Limit of 10 Products</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#up-to-500-or-1000-products">Up to 500 or 1000 products</a></li>
<li class="toctree-l2"><a class="reference internal" href="#from-1000-to-10-000-products">From 1000 to 10,000 products</a></li>
<li class="toctree-l2"><a class="reference internal" href="#beyond-10-000-products">Beyond 10,000 products:</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Support</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../support/contact.html">Contact Us</a></li>
<li class="toctree-l1"><a class="reference internal" href="../support/contribute.html">Contribute</a></li>
<li class="toctree-l1"><a class="reference internal" href="../support/contribute.html#report-a-bug-or-new-feature-request">Report a Bug or New Feature Request</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">PDS Registry Client</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>🏃‍♀️ Usage</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/nasa-pds/registry-client/blob/main/docs/source/usage/index.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="usage">
<h1>🏃‍♀️ Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
</div>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>This package provides one command line tool used to query the Registry OpenSearch Database in AWS.</p>
<p>This utility takes care of the authentication and signing procedures needed to access the <a class="reference external" href="https://opensearch.org/docs/latest/api-reference/">OpenSearch API</a>.
It is then providing access to the full OpenSearch API syntax within the limit of your access authorizations.</p>
<p>This section describes how to use the <cite>registry-client</cite> application for accessing data
within your PDS Registry.</p>
</div>
<div class="section" id="pre-requisites">
<h2>Pre-requisites<a class="headerlink" href="#pre-requisites" title="Permalink to this headline">¶</a></h2>
<p>For this reason, there are 3 pre-requisites to use the tool:</p>
<ol class="arabic simple">
<li><p>Have authentication and authorization to access the Registry OpenSearch Database, see Prerequisites in <a class="reference internal" href="../installation/index.html"><span class="doc">📦 Installation</span></a>.</p></li>
<li><p>Knowledge of the OpenSearch indexes used by the registry. Details are given below.</p></li>
<li><p>Knowledge of the OpenSearch API syntax. However, we provide in the manual the most useful queries.</p></li>
</ol>
<div class="section" id="registry-indexes">
<h3>Registry indexes<a class="headerlink" href="#registry-indexes" title="Permalink to this headline">¶</a></h3>
<p>For each discipline node, the following indexes exist:</p>
<table class="docutils align-default" id="id1">
<caption><span class="caption-text">Indexes</span><a class="headerlink" href="#id1" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Index Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>&lt;node_code&gt;-registry</p></td>
<td><p>One record per PDS4 label</p></td>
</tr>
<tr class="row-odd"><td><p>&lt;node_code&gt;-registry-refs</p></td>
<td><p>Records linking batches of observational_products with their collections</p></td>
</tr>
<tr class="row-even"><td><p>&lt;node_code&gt;-registry-dd</p></td>
<td><p>Type of all the properties used in the PDS4 labels.</p></td>
</tr>
</tbody>
</table>
<p>The node_code values can be: atm, en, geo, img, naif, ppi, psa, rms, sbnpsi, sbnumd</p>
<p>As a node operator, you only have access, with registry-client to your own indexes.</p>
</div>
</div>
<div class="section" id="usage-information">
<h2>Usage Information<a class="headerlink" href="#usage-information" title="Permalink to this headline">¶</a></h2>
<p>Run <code class="docutils literal notranslate"><span class="pre">pds-registry-client</span> <span class="pre">--help</span></code>  to
get summaries of the command-line invocations, required arguments, and any
options that refine the behavior.</p>
<p>The following section gives examples of query, gradually more complex. You can go through them.</p>
<p><em>Note:: all the examples queries hereafter are accessible for download in this directory _`Query Examples&lt;https://github.com/NASA-PDS/registry-client/tree/main/conf/examples&gt;</em></p>
<p><em>Note: The following instructions use</em> <a class="reference external" href="https://www.gnu.org/software/wget/">wget</a> <em>to be
installed. For Windows users, you will also need to replace the $REGISTRY variable in the commands
below, versus trying to set an environment variable.</em></p>
<p>For more examples, checkout the <a class="reference external" href="https://github.com/NASA-PDS/registry/discussions">Registry Discussion Board</a></p>
<div class="section" id="get-the-first-10-products-of-your-discipline-node">
<h3>Get The First 10 Products of Your Discipline Node<a class="headerlink" href="#get-the-first-10-products-of-your-discipline-node" title="Permalink to this headline">¶</a></h3>
<p>Here for Engineering Node, code <cite>en</cite>, try this command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pds</span><span class="o">-</span><span class="n">registry</span><span class="o">-</span><span class="n">client</span> <span class="s1">&#39;/en-registry/_search&#39;</span>
</pre></div>
</div>
<p>You are getting a json response with a summary of the response and the 10 products retrieved by querying the OpenSearch API end-point <cite>_search</cite> on your index <cite>registry</cite> without filters.</p>
<p>The pagination configuration of OpenSearch return by default only 10 results per query. We’ll see later how to get more.</p>
<p>You can also “pretty” print the response by adding an option:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pds</span><span class="o">-</span><span class="n">registry</span><span class="o">-</span><span class="n">client</span> <span class="s1">&#39;/en-registry/_search&#39;</span> <span class="o">--</span><span class="n">pretty</span>
</pre></div>
</div>
<p>And store the response in a file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pds</span><span class="o">-</span><span class="n">registry</span><span class="o">-</span><span class="n">client</span> <span class="s1">&#39;/en-registry/_search&#39;</span> <span class="o">--</span><span class="n">pretty</span> <span class="o">&gt;</span> <span class="n">result</span><span class="o">.</span><span class="n">json</span>
</pre></div>
</div>
</div>
<div class="section" id="simple-filter-get-the-first-10-bundles-of-your-node">
<h3>Simple Filter, Get The First 10 Bundles of Your Node<a class="headerlink" href="#simple-filter-get-the-first-10-bundles-of-your-node" title="Permalink to this headline">¶</a></h3>
<p>Try this command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pds</span><span class="o">-</span><span class="n">registry</span><span class="o">-</span><span class="n">client</span> <span class="s1">&#39;/en-registry/_search&#39;</span> <span class="o">--</span><span class="n">data</span> <span class="s1">&#39;{&quot;query&quot;:{&quot;match&quot;:{&quot;product_class&quot;:&quot;Product_Bundle&quot;}}}&#39;</span> <span class="o">--</span><span class="n">pretty</span>
</pre></div>
</div>
<p>The <cite>–data</cite> argument value, contains the filter which selects the bundles.</p>
<p>You can see more clearly what the filter does by pasting the content in a json formatter, for example <a class="reference external" href="https://jsonformatter.org/">https://jsonformatter.org/</a></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;query&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;match&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">&quot;product_class&quot;</span><span class="p">:</span> <span class="s2">&quot;Product_Bundle&quot;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>You are filtering all the products which property <cite>product_class</cite> is equal to “Product_Bundle”.</p>
<p>However the handling of the query string in the –data is tedious and uneasy to read.</p>
<p>You can instead manage the query in a file, for example <a class="reference external" href="https://github.com/NASA-PDS/registry-client/blob/main/conf/examples/bundles.json">bundles.json</a> containing the indented code above.</p>
<p>You can call the command line as follow, with the same result:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pds</span><span class="o">-</span><span class="n">registry</span><span class="o">-</span><span class="n">client</span> <span class="s1">&#39;/en-registry/_search&#39;</span> <span class="o">--</span><span class="n">data</span> <span class="nd">@bundles</span><span class="o">.</span><span class="n">json</span> <span class="o">--</span><span class="n">pretty</span>
</pre></div>
</div>
<p>You can download our bundles.json file are follow:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">wget</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">raw</span><span class="o">.</span><span class="n">githubusercontent</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">NASA</span><span class="o">-</span><span class="n">PDS</span><span class="o">/</span><span class="n">registry</span><span class="o">-</span><span class="n">client</span><span class="o">/</span><span class="n">main</span><span class="o">/</span><span class="n">conf</span><span class="o">/</span><span class="n">examples</span><span class="o">/</span><span class="n">bundles</span><span class="o">.</span><span class="n">json</span>
</pre></div>
</div>
<p>The same process applies to select the collections, see query <a class="reference external" href="https://raw.githubusercontent.com/NASA-PDS/registry-client/main/conf/examples/collections.json">collections.json</a></p>
</div>
<div class="section" id="get-a-single-product">
<h3>Get A Single Product<a class="headerlink" href="#get-a-single-product" title="Permalink to this headline">¶</a></h3>
<p>Consider the query in file <a class="reference external" href="https://raw.githubusercontent.com/NASA-PDS/registry-client/main/conf/examples/single_product.json">single_product.json</a></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;query&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;match&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">&quot;lid&quot;</span><span class="p">:</span> <span class="s2">&quot;urn:nasa:pds:insight_documents:document_hp3rad&quot;</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="s2">&quot;fields&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="s2">&quot;lidvid&quot;</span><span class="p">,</span>
    <span class="s2">&quot;ops:Label_File_Info/ops:file_ref&quot;</span><span class="p">,</span>
    <span class="s2">&quot;ops:Tracking_Meta/ops:archive_status&quot;</span><span class="p">,</span>
    <span class="s2">&quot;ops:Provenance/ops:parent_bundle_identifier&quot;</span>
  <span class="p">],</span>
  <span class="s2">&quot;_source&quot;</span><span class="p">:</span> <span class="n">false</span>
<span class="p">}</span>
</pre></div>
</div>
<p>You can download the query file with command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">wget</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">raw</span><span class="o">.</span><span class="n">githubusercontent</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">NASA</span><span class="o">-</span><span class="n">PDS</span><span class="o">/</span><span class="n">registry</span><span class="o">-</span><span class="n">client</span><span class="o">/</span><span class="n">main</span><span class="o">/</span><span class="n">conf</span><span class="o">/</span><span class="n">examples</span><span class="o">/</span><span class="n">single_product</span><span class="o">.</span><span class="n">json</span>
</pre></div>
</div>
<p>This query will select products matching the given <cite>lid</cite> and return the lidvid, and a few other properties for each of them.</p>
<p>Run the query as follow:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span># Set your registry and execute registry-client
export REGISTRY=geo-registry
pds-registry-client --data @single_product.json /${REGISTRY}/_search –pretty
</pre></div>
</div>
</div>
<div class="section" id="get-all-the-properties-available">
<h3>Get All the Properties Available<a class="headerlink" href="#get-all-the-properties-available" title="Permalink to this headline">¶</a></h3>
<p>You can get the list of the properties you can filter on by querying the <cite>_mapping</cite> end-point. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pds</span><span class="o">-</span><span class="n">registry</span><span class="o">-</span><span class="n">client</span> <span class="s1">&#39;/en-registry/_mapping&#39;</span> <span class="o">--</span><span class="n">pretty</span>
</pre></div>
</div>
</div>
<div class="section" id="get-all-the-distinct-values-for-one-property">
<h3>Get All the Distinct Values for One Property<a class="headerlink" href="#get-all-the-distinct-values-for-one-property" title="Permalink to this headline">¶</a></h3>
<p>Consider the following query available a file, <a class="reference external" href="https://raw.githubusercontent.com/NASA-PDS/registry-client/main/conf/examples/archive_status_values.json">archive_status_values.json</a></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;size&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
  <span class="s2">&quot;aggs&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;response_codes&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">&quot;terms&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;field&quot;</span><span class="p">:</span> <span class="s2">&quot;ops:Tracking_Meta/ops:archive_status&quot;</span><span class="p">,</span>
        <span class="s2">&quot;size&quot;</span><span class="p">:</span> <span class="mi">99</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The first <cite>size</cite> property means you don’t want any products in your response, but only the distinct values of the property archive_status. For details on this type of query go to <span class="target" id="aggregations-https-opensearch-org-docs-latest-aggregations">Aggregations &lt;https://opensearch.org/docs/latest/aggregations/&gt;</span></p>
<p>You can get the archive_status existing, distinct values in your node by running:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pds</span><span class="o">-</span><span class="n">registry</span><span class="o">-</span><span class="n">client</span> <span class="o">--</span><span class="n">data</span> <span class="nd">@conf</span><span class="o">/</span><span class="n">examples</span><span class="o">/</span><span class="n">archive_status_values</span><span class="o">.</span><span class="n">json</span> <span class="o">/</span><span class="n">en</span><span class="o">-</span><span class="n">registry</span><span class="o">/</span><span class="n">_search</span> <span class="o">--</span><span class="n">pretty</span>
</pre></div>
</div>
</div>
<div class="section" id="get-results-beyond-limit-of-10-products">
<h3>Get Results Beyond Limit of 10 Products<a class="headerlink" href="#get-results-beyond-limit-of-10-products" title="Permalink to this headline">¶</a></h3>
<p>For details on pagination in OpenSearch see <a class="reference external" href="https://opensearch.org/docs/latest/search-plugins/searching-data/paginate/">pagination</a></p>
</div>
</div>
<div class="section" id="up-to-500-or-1000-products">
<h2>Up to 500 or 1000 products<a class="headerlink" href="#up-to-500-or-1000-products" title="Permalink to this headline">¶</a></h2>
<p>By default, OpenSearch returns 10 results per page, you can increase this value up to 500 or 1000.
You can do this by adding the property <cite>size</cite> to you query. As follow:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;size&quot;</span><span class="p">:</span> <span class="mi">500</span><span class="p">,</span>
  <span class="s2">&quot;query&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;match&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">&quot;product_class&quot;</span><span class="p">:</span> <span class="s2">&quot;Product_Bundle&quot;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="from-1000-to-10-000-products">
<h2>From 1000 to 10,000 products<a class="headerlink" href="#from-1000-to-10-000-products" title="Permalink to this headline">¶</a></h2>
<p>If your query returns more than 1000 products, but less than 10,000 and you want to see them all, then you need to do multiple requests using the pagination feature of OpenSearch.</p>
<p>The most simple way of using pagination is to iterate over pages using the <cite>from</cite> property. The <cite>from</cite> property defines the sequence number of the first product in the response.</p>
<p>You can get the second page with query:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;from&quot;</span><span class="p">:</span> <span class="mi">500</span><span class="p">,</span>
  <span class="s2">&quot;size&quot;</span><span class="p">:</span> <span class="mi">500</span><span class="p">,</span>
  <span class="s2">&quot;query&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;match&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">&quot;product_class&quot;</span><span class="p">:</span> <span class="s2">&quot;Product_Bundle&quot;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>And iterate with from values 1000, 1500, … until the number of product returned is less than the <cite>size</cite> value.</p>
</div>
<div class="section" id="beyond-10-000-products">
<h2>Beyond 10,000 products:<a class="headerlink" href="#beyond-10-000-products" title="Permalink to this headline">¶</a></h2>
<p>At last if your query returns more that 10,000 products, you’ll have to use the <cite>search-after</cite> property. The initial page need to be sorted by one of the product’s properties. We advise to use <cite>ops:Harvest_Info/ops:harvest_date_time</cite> which defines the time when the product has been loaded in the registry.</p>
<p>The first page’s query is going to look like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;sort&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;ops:Harvest_Info/ops:harvest_date_time&quot;</span><span class="p">],</span>
  <span class="s2">&quot;size&quot;</span><span class="p">:</span> <span class="mi">500</span><span class="p">,</span>
  <span class="s2">&quot;query&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;match&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">&quot;product_class&quot;</span><span class="p">:</span> <span class="s2">&quot;Product_Bundle&quot;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Then, you should get the “ops:Harvest_Info/ops:harvest_date_time” value for the last product returned by this query, for example “2023-09-25T15:40:54.993Z” and will query a new page for products which harvest_time is greater than this value, as follow:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;sort&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;ops:Harvest_Info/ops:harvest_date_time&quot;</span><span class="p">],</span>
  <span class="s2">&quot;search_after&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;2023-09-25T15:40:54.993Z&quot;</span><span class="p">],</span>
  <span class="s2">&quot;size&quot;</span><span class="p">:</span> <span class="mi">500</span><span class="p">,</span>
  <span class="s2">&quot;query&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;match&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">&quot;product_class&quot;</span><span class="p">:</span> <span class="s2">&quot;Product_Bundle&quot;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>And so forth, until the page returned contains less than 500 products.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../support/contact.html" class="btn btn-neutral float-right" title="Contact Us" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../installation/index.html" class="btn btn-neutral float-left" title="📦 Installation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2024 California Institute of Technology

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>